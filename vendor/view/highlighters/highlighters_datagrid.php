<?php/** Importação de classes  */use vendor\model\Highlighters;use vendor\controller\HIGHLIGHTERS\HighlightersValidate;try{    /** Instânciamento de classes  */    $Highlighters = new Highlighters();    $HighlightersValidate = new HighlightersValidate();    /** Parametros de entrada  */    $psiLanguage = isset($_POST['psi_language']) ? filter_input(INPUT_POST,'psi_language', FILTER_SANITIZE_SPECIAL_CHARS) : '';    /** Validando os campos de entrada */    $HighlightersValidate->setPsiLanguage($psiLanguage);    /** Verifico a existência de erros */    if (!empty($HighlightersValidate->getErrors())) {        /** Preparo o formulario para retorno **/        $result = [            'cod' => 0,            'title' => 'Atenção',            'message' => '<div class="alert alert-danger" role="alert">'.$HighlightersValidate->getErrors().'</div>',        ];    } else {        /** Efetua um novo cadastro ou salva os novos dados */        if ($Highlighters->Save($HighlightersValidate->getHighlightersId(), $HighlightersValidate->getPsiLanguage())){            /** Prepara a mensagem de retorno - sucesso */            $message = '<div class="alert alert-success" role="alert">'.($HighlightersValidate->getHighlightersId() > 0 ? 'Cadastro atualizado com sucesso' : 'Cadastro efetuado com sucesso').'</div>';            /** Result **/            $result = [                'cod' => 200,                'title' => 'Atenção',                'message' => $message,                'redirect' => '',            ];        } else {            /** Prepara a mensagem de retorno - erro */            $message = '<div class="alert alert-success" role="alert">'.($HighlightersValidate->getHighlightersId() > 0 ? 'Não foi possível atualizar o cadastro' : 'Não foi possível efetuar o cadastro') .'</div>';            /** Result **/            $result = [                'cod' => 0,                'title' => 'Atenção',                'message' => $message,                'redirect' => '',            ];        }    }    /** Envio **/    echo json_encode($result);    /** Paro o procedimento **/    exit;}catch(Exception $exception){    /** Preparo o formulario para retorno **/    $result = [        'cod' => 0,        'message' => $exception->getMessage(),        'title' => 'Erro Interno',        'type' => 'exception',    ];    /** Envio **/    echo json_encode($result);    /** Paro o procedimento **/    exit;}